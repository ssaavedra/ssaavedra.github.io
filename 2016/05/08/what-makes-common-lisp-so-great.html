<!DOCTYPE html>
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:dc="http://purl.org/dc/terms/"
	xmlns:foaf="http://xmlns.com/foaf/0.1/"
	xmlns:og="http://ogp.me/ns#"
	lang="en"
	xml:lang="en">
  <head>
  <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
  <title>What makes Common Lisp so great a language?</title>
  <meta name="author" content="Santiago Saavedra" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  

<!-- Get date last modified from git log. (Uses current time if file entry not found, e.g. projects/)  -->



<!-- For posts, page.date is the date they are published under, which we use as their 'canonical' dc:date -->

  
  

<!-- Posts declare modified timestamps in the sidebar, so would be redundant to put here. But then
     pages don't have a dc:modified... unless we give them their own (modified) sidebar?
-->
<!-- Ideally we would want date originally created from the _oldest_ git commit too...-->

<!-- HTML5 metadata -->
<meta name="keywords" content="Opinion-based" />
<meta name="description" content="" />
<meta name="resource_type" content="website"/>
<!-- RDFa Metadata (in DublinCore) -->
<meta property="dc:title" content="What makes Common Lisp so great a language?" />
<meta property="dc:creator" content="Santiago Saavedra" />
<meta property="dc:date" content="2016-05-08T02:00:00+02:00" />
<meta property="dc:format" content="text/html" />
<meta property="dc:language" content="en" />
<meta property="dc:identifier" content="/2016/05/08/what-makes-common-lisp-so-great.html" />
<meta property="dc:rights" content="CC-By-SA v3.0" />
<meta property="dc:source" content="Synthetic Silice" />
<meta property="dc:subject" content="Technology" />
<meta property="dc:type" content="text" />
<!-- RDFa Metadata (in OpenGraph) -->
<meta property="og:title" content="What makes Common Lisp so great a language?" />
<meta property="og:author" content="/index.html#me" />  <!-- Should be Liquid? URI? -->
<meta property="http://ogp.me/ns/profile#first_name" content="Santiago"/>
<meta property="http://ogp.me/ns/profile#last_name" content="Saavedra"/>
<meta property="http://ogp.me/ns/article#published_time" content="2016-05-08T02:00:00+02:00" />
<meta property="og:site_name" content="Synthetic Silice" /> <!-- Same as dc:source? -->
<meta property="og:url" content="/2016/05/08/what-makes-common-lisp-so-great.html" />
<meta property="og:type" content="website" />

<!--NOTE: see also the COinS Metadata in span element in footer -->




  <!-- CSS Stylesheets (toggled with javascript) -->
  <link href="/assets/css/bootstrap.css" rel="stylesheet"
        type="text/css" title="white" />
  <link href="/assets/css/light.css" rel="alternate stylesheet"
        type="text/css" id="stl" title="light" />
  <link href="/assets/css/dark.css" rel="alternate stylesheet"
        type="text/css" title="dark" />
  <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet"
        type="text/css"/>

  <link href="/assets/css/hilight-light.css" rel="stylesheet"
        type="text/css" />
  <link href="/assets/css/hilight-light.css" rel="alternate stylesheet"
        type="text/css" />
  <!-- Javascript needed for theme toggle, load immediately -->
  <script type="text/javascript" src="/assets/js/switch-css.js"></script>
  <script type="text/javascript">
    set_style_from_cookie();
  </script>
</head>


  <body>
    <!-- Navbar  ================================================== -->
<div class="navbar navbar-default">
  <div class="container-fluid">

    <a class="navbar-brand" class="#">Synthetic Silice</a>
    <div class="navbar-header">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li>
          <a href="/index.html">Home</a></li>

          <li>
          <a rel="me" href="/about.html">About</a></li>

        </ul>

      <!-- Search site using Google's index -->
      <form class="navbar-form navbar-right" method="get" action="http://google.com/search">
          <input type="hidden" name="q" value="site:ssaavedra.github.io" />
	  <div class="form-group">
            <input type="text" class="form-control" placeholder="Search..." name="q" />
          </div>
          <button class="btn btn-mini" type="submit"><i class="glyphicon glyphicon-search"></i></button>
        </p>
      </form>
      <!--
      <div id="search">
      <form method="get" class="navbar-search pull-right form-search">
        <p>
        <input type="text" name="search-text" id="search-text">
         <button class="btn btn-mini" type="submit"><i class="icon-search"></i></button>
        </p>
      </form>
      </div>
      -->
      </div><!--/.nav-collapse -->
     </div> <!-- /container -->
   </div> <!-- /navbar-inner -->
 </div> <!-- /navbar -->



    <div class="container"> <!-- Responsive grid layout -->

      
<!-- <header class="jumbotron"> -->
  	<h1 class="entry-title">What makes Common Lisp so great a language?</h1>
  	
<!-- </header> -->




<div class="row">
	<div class="col-md-8">
		<article>
			<p>I've recently come to a somewhat real use of Common Lisp for a project
I work on.  I've always been attracted to somewhat esoterical and
not-so-commonly-used languages, because they have always given me
insights on programming that are so hard to realize anywhere else.</p>

<p>You don't usually understand functional programming until you are
forced out of side effects, and you may not fully comprehend side
effects until you meet Haskell's Monads, or the importance of
referencial transparency until you write a functional language
compiler.</p>

<p>With Common Lisp, it's all about <a href="https://en.wikipedia.org/wiki/Homoiconicity">homoiconicity</a> <sup>(from
Greek: homo=same + icon=representation)</sup>. Briefly, this refers to
the fact that in lisp dialects code is first-order.</p>

<p>Well, in Common Lisp there are so many first order things, but let's
start with code.</p>

<h1>Homoiconicity</h1>

<p>As said before, code and data homoiconicity refer to the property that
they are represented the same. Both are represented in a syntax called Symbolic
expressions (S-expressions or sexps for short). Sexps are very simple
pieces of syntax: they are either symbols, or they are lists.</p>

<ul>
<li>symbol</li>
<li>(sub-sexp1 sub-sexp2 ...)</li>
</ul>


<p>So, the symbolic expression:</p>

<p><figure class="highlight"><pre><code class="language-common-lisp" data-lang="common-lisp"><span class="p">(</span><span class="nb">floor</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">)</span></code></pre></figure></p>

<p>Is the list of three elements, which are the symbols <code>floor</code>, <code>5</code> and
<code>2</code>. That is data. But that data is also code.</p>

<h2>Data as code</h2>

<p>If we evaluate that previous expression, it returns two values (because,
yes, Common Lisp can return multiple values, and that is not the same
as returning tuples), the first one being the division 5/2 and the
second one being the remainder.</p>

<p><figure class="highlight"><pre><code class="language-common-lisp" data-lang="common-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">floor</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">2</span>
<span class="nv">1</span></code></pre></figure></p>

<p>That list can be generated from the following code:</p>

<p><figure class="highlight"><pre><code class="language-common-lisp" data-lang="common-lisp"><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'floor</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nb">floor</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">)</span></code></pre></figure></p>

<p>That function, list, builds a list with the rest of the elements. As
CL is a call-by-value language, the quote in floor will avoid it being
evaluated as a variable.</p>

<p>However, entering the first value directly on the REPL (how the
interactive loop is called) will compute 5/2, so it is fundamentally code.</p>

<p>But lisp data can be turned into lisp code easily, via eval.</p>

<p><figure class="highlight"><pre><code class="language-common-lisp" data-lang="common-lisp"><span class="p">(</span><span class="nb">eval</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'floor</span> <span class="mi">5</span> <span class="mi">2</span><span class="p">))</span>
<span class="mi">2</span>
<span class="nv">1</span></code></pre></figure></p>

<p>Not only that, lisp code can be manipulated as if it were lisp data,
by using macros.</p>

<blockquote><p>Macros in lisp have nothing to do with C macros.</p></blockquote>

<h2>Code as data</h2>

<p>That's the other part of the equation. Fortunately, it is a quite
symmetric relationship: code can be manipulated as if it were a
regular sexp.</p>

<p>How so? Well, in Common Lisp, when a file is loaded into the
evaluator, three stages happen:</p>

<dl class="dl-horizontal">
<dt>read</dt>
<dd>The file is read into s-expressions, and several intricate things
may happen, due to something called reader-macros</dd>

<dt>compile</dt>
<dd>The read expressions are macroexpand-ed and compiled into a bytecode or object code for later evaluation</dd>
<dt>evaluation</dt>
<dd>The compiled expressions are evaluated</dd>
</dl>


<p>In the first stage, the environment makes sense of the input stream
data (e.g., characters) as s-expressions, so here we can influence the
lexer (i.e., the reader algorithm) in order to extend our syntax
beyond s-expressions.</p>

<p>But it is the second stage the one that allows code to be manipulated
as data. As we already have read the file, we now have s-expressions
representing our code which are in their way to being compiled.</p>

<p>Thus, macros in lisp can be <em>semantic macros</em>, and not just <em>lexical
macros</em>, e.g., the textual substitutions that happen with the C
Preprocessor and similar.</p>

<p>Besides, the Common Lisp compiler is first-order itself, which means
that during compilation, <strong>the full Common Lisp runtime is
accessible</strong>. That means that regular functions can be called inside
macros, therefore a macro is a compile-time run function operating on
your program's AST, and which should return another AST for
compilation. Effectively, by using macros in Common Lisp, you are
writing <em>programs that write other programs at compile time</em>.</p>

<p>This macro mechanism is so flexible and extensible that the language
continuously encourages you to write your own
mini-DSLs<sup>Domain-Specific Language</sup> for every
problem. Because it is so easy and straightforward.</p>

<h2>The meta level</h2>

<p>The project I'm using Common Lisp with at the time involves writing
some code that can mean two different things, depending on how the
code is reached. As I can introduce definitions for a DSL on-demand, I
can give different semantics to my data by directly writing macros for
each case, instead of me manually interpreting the code. That is,
instead of writing my own two interpreters for the code, I leverage
the existing Common Lisp EVAL function, and I just introduce the
needed definitions into the EVAL environment in each case.</p>

<h1>Why is Lisp still useful when we have X?</h1>

<p>Well, consider the language features of your recent X.</p>

<p>Let's consider if it is up to par with a language designed in the late 1950s.</p>

<ul>
<li>Does it have a function type? (i.e., functions as first-class objects)</li>
<li>recursion? (how about tail-call optimization?)</li>
<li>garbage collection?</li>
<li>programs composed of expressions? (i.e., no distinction with statements?)</li>
<li>a symbol type? (symbols are not strings, and can be tested for
equality by comparing pointers)</li>
<li>a notation for code using trees for symbols?</li>
<li>the whole language always available? (at read-time/compile-time/eval-time?)</li>
<li>a multiple-inheritance multiple-dispatch class-based object oriented
mechanism? (Common Lisp has the CLOS, or Common Lisp Object System)</li>
<li>A MetaObject Protocol (MOP)?</li>
<li>First-order continuations?</li>
<li>Non-local exits?</li>
<li>Constructors and destructors?</li>
<li>dynamic variables?</li>
</ul>


<p>I'm going to leave this post here, but if you have some time and
curiosity, give Common Lisp a look. I have yet to encounter a more
expressive language.</p>

		</article>
        </div>
	<div class="col-md-4">
		<div class="sidebar">
			<aside xmlns:og="http://ogp.me/ns/article#">
  <p> <i class="icon-calendar"></i>
    <time datetime="2016-05-08T02:00:00+02:00"
          property="dc:created">08 May 2016</time></p>
  <p><small> modified: <time
                          datetime="2016-05-08T00:00:00+02:00"
                          property="dc:modified">08 May 2016</time></small></p>

  <br />

  
  <p><a class="btn btn-mini" rel="prev" href='/2015/07/16/what-we-do-in-the-shadows.html'><i class="glyphicon glyphicon-chevron-left"></i> prev</a>
    
    
    <a class="btn btn-mini" rel="next" href='/2016/07/15/pokemon-go-considered-harmful.html'>next <i class="glyphicon glyphicon-chevron-right"></i></a></p>
    

  <br />

  <p><small>
      <i class="glyphicon glyphicon-barcode"></i> SHA Hash:
      <a onclick="recordOutboundLink(this, 'Outbound Links', 'history'); return false;"
         href="http://github.com/ssaavedra/ssaavedra.github.io/commit/69cbfe81110b898675a8598e9ee3f1811bdde980/_posts/2016-05-08-what-makes-common-lisp-so-great.md"
         >69cbfe81</a>
      |
      <a onclick="recordOutboundLink(this, 'Outbound Links', 'history'); return false;"
         href="http://github.com/ssaavedra/ssaavedra.github.io/commits/source/_posts/2016-05-08-what-makes-common-lisp-so-great.md">
        <i class="glyphicon glyphicon-time"></i> history</a>
  </small></p>

  <br />

  <p><i class="glyphicon glyphicon-list"></i> Posted in
    
      <a rel="dc:subject" class="category"
         href="/categories.html#Programming">Programming</a>.</p>

  <p>
    <i class="glyphicon glyphicon-tag"></i>
    
     tags
      
      <!-- http://schema.org/BlogPosting/keywords -->
      <a rel="og:tag" class="tag"
         href="/tags.html#Opinion-based">#Opinion-based</a>
      
    
  </p>

  <br/>

  


</aside>

<!-- Local Variables: -->
<!-- indent-tabs-mode: nil -->
<!-- End: -->

		</div>
	</div>
</div>



  


<i class=icon-comments"></i> <a href="mailto:address?subject=Comment&body=%0D+From+post+/2016/05/08/what-makes-common-lisp-so-great.html", class="showtooltip", title="Comments are submitted by email and will appear when they are approved. Markdown & mathjax syntax welcome.">Leave a comment</a>



<!--
{X include disqus.html %}
-->



<footer class="footer">
  <!-- ************* Buttons to toggle theme CSS ********************** -->
  <!-- THIS IS NOT YET WORKING
    <div class="row">
      <div class="span12">
        <form style="font-size:10px" class="pull-right">
          <a onclick="switch_style('dark');
                      recordOutboundLink(this, 'Outbound Links', 'dark theme');
                      return false;"
             name="theme" value="dark" id="dark"
             class="btn btn-mini"><span class="showtooltip"
                                        title="switch to dark theme"><i class="glyphicon glyphicon-adjust"></i>
                                   </span></a>

          <a onclick="switch_style('light');
                      recordOutboundLink(this, 'Outbound Links', 'light theme');
                      return false;"
             name="theme" value="light" id="light"
             class="btn btn-mini"><span class="showtooltip"
                                        title="switch to light theme"><i class="glyphicon glyphicon-certificate"></i>
           <a onclick="switch_style('white');
                      recordOutboundLink(this, 'Outbound Links', 'white theme');
                      return false;"
             name="theme" value="white" id="white"
             class="btn btn-mini"><span class="showtooltip"
                                        title="switch to white theme"><i class="glyphicon glyphicon-eye-open"></i>
                                  </span></a>
                                 </span></a>
        </form>
      </div>
    </div>
    -->

<!--************** FOAF information to social networks ***************************** -->
  <div class="row">
    <div class="span3 socialicons" style="font-size:20px" typeof="foaf:Person" about="#me">
      <p>
          <span class='showtooltip' title='DM me via Twitter if you need my email'><i class='icon-envelope-alt'></i></span></a>
          <a rel="foaf:account" alt="twitter" href="https://twitter.com/ssice"
             onclick="recordOutboundLink(this, 'Outbound Links', 'Twitter');
             return false;"><span class="showtooltip" title="follow me on twitter (mostly in spanish)"><i class="icon-twitter"></i></span></a>
          <a rel="foaf:account" alt="github" href="https://github.com/ssaavedra"
             onclick="recordOutboundLink(this, 'Outbound Links', 'Github');
             return false;"><span class="showtooltip" title="follow me on Github (code, research)"><i class="icon-github"></i></span></a>

          <a rel="foaf:account" href="https://plus.google.com/113784949537624348716"
             onclick="recordOutboundLink(this, 'Outbound Links', 'GPlus');
             return false;"><i class="icon-google-plus"></i></a>
      <a alt="rss" type="application/atom+xml" href="/atom.xml"
         class="showtooltip" title="subscribe to RSS feeds for my open lab notebook"
         onclick="recordOutboundLink(this, 'Outbound Links', 'RSS');
         return false;"><i class="icon-rss"></i></a>
       </p>
    </div>
    <!--**************** End social links **************************** -->
    <div class="span1">
      <br />
    </div>

    <div class="span5">
      <a href="http://gmpg.org/xfn"> <img src="http://gmpg.org/xfn/xfn-btn.gif" alt="XFN Friendly" /> </a>
      <br />
    </div>
    <div class="span3">
      <p>

        <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/" onclick="recordOutboundLink(this, 'Outbound Links', 'CC'); return false;"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a><br />

        <span style="opacity: 0.9; font-size: 0.8em">

          <span xmlns:dct="http://purl.org/dc/terms/"
            href="http://purl.org/dc/dcmitype/Text"
            property="dct:title"
            rel="dct:type">What makes Common Lisp so great a language?</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="/2016/05/08/what-makes-common-lisp-so-great.html" property="cc:attributionName" rel="cc:attributionURL">Santiago Saavedra</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.

        </span>
      </p>
    </div>

  </div>
</footer>




    <!-- Le javascript
    ================================================== -->

    <!-- Placed at the end of the document so the pages load faster -->
    <!-- JQuery, used on a few pages -->
    <script type="text/javascript" src="/assets/js/jquery.js"></script>
    <!-- Equations using MathJax -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: {autoNumber: "all"} } });       </script>
    <!-- Twitter Bootstrap Javascript -->
    <script src="/assets/js/bootstrap.min.js"></script>
    <!-- Tooltip javascript -->
    <script type="text/javascript">
      $(document).ready(function (){
        $(".showtooltip").tooltip();
      });
    </script>

    <!-- Marran's Search Javascript -->
    <script type="text/javascript" src="/assets/js/porter-stemmer.js"></script>
    <script type="text/javascript" src="/assets/js/site-search.js"></script>

    <!-- Code collapse Javascript -->
    <script type="text/javascript">
    $(document).ready(function(){
      $("#toggle_code").click(function(){
        $(".highlight").toggle();
        $(".sourceCode").toggle();
      });
    });
    </script>



  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-672505-10', 'ssaavedra.github.io');
	ga('require', 'linkid', 'linkid.js');
	ga('require', 'displayfeatures');
	ga('send', 'pageview');
  </script>



<script type="text/javascript">
function recordOutboundLink(link, category, action) {
  try {
    ga('send', 'event', category, action);
  }catch(err){}
}
</script>



    


    </div>
  </body>
</html>

